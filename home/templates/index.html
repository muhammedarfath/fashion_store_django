{% extends "base.html" %}
{% load static %}
{% block header%}{%include 'header.html'%}{%endblock%}
{% block body %}
<link rel="stylesheet" href="https://unpkg.com/@trevoreyre/autocomplete-js/dist/style.css"/>	
  		<div class="mobile-menu-area">
				<div class="container-fluid">
					<div class="row">
						<div class="col-xs-12 d-block d-md-none">
							<div class="mobile-menu">
								<nav id="dropdown">
									<ul>
										<li><a href="/">home</a>
											<ul>
												<li><a href="index.html">Home Version 1</a></li>
												<li><a href="index-2.html">Home Version 2</a></li>
											</ul>
										</li>
										<li><a href="shop.html">products</a></li>
										<li><a href="shop-sidebar.html">accesories</a></li>
										<li><a href="shop-list.html">lookbook</a></li>
										<li><a href="blog.html">blog</a></li>
										<li><a href="#">pages</a>
											<ul>
												<li><a href="shop.html">Shop</a></li>
												<li><a href="shop-sidebar.html">Shop Sidebar</a></li>
												<li><a href="shop-list.html">Shop List</a></li>
												<li><a href="single-product.html">Single Product</a></li>
												<li><a href="single-product-sidebar.html">Single Product Sidebar</a></li>
												<li><a href="cart.html">Shopping Cart</a></li>
												<li><a href="wishlist.html">Wishlist</a></li>
												<li><a href="checkout.html">Checkout</a></li>
												<li><a href="order.html">Order</a></li>
												<li><a href="login.html">login / Registration</a></li>
												<li><a href="my-account.html">My Account</a></li>
												<li><a href="404.html">404</a></li>
												<li><a href="blog.html">Blog</a></li>
												<li><a href="single-blog.html">Single Blog</a></li>
												<li><a href="single-blog-sidebar.html">Single Blog Sidebar</a></li>
												<li><a href="about.html">About Us</a></li>
												<li><a href="contact.html">Contact</a></li>
											</ul>
										</li>
										<li><a href="about.html">about us</a></li>
										<li><a href="contact.html">contact</a></li>
									</ul>
								</nav>
							</div>
						</div>
					</div>
				</div>
		</div>

			<section class="slider-banner-area clearfix">
				<!-- Sidebar-social-media start -->
				<div class="sidebar-social d-none d-md-block">
					<div class="table">
						<div class="table-cell">
							<ul>
								<li><a href="#" target="_blank" title="Google Plus"><i class="zmdi zmdi-google-plus"></i></a></li>
								<li><a href="#" target="_blank" title="Twitter"><i class="zmdi zmdi-twitter"></i></a></li>
								<li><a href="#" target="_blank" title="Facebook"><i class="zmdi zmdi-facebook"></i></a></li>
								<li><a href="#" target="_blank" title="Linkedin"><i class="zmdi zmdi-linkedin"></i></a></li>
							</ul>
						</div>
					</div>
				</div>
				<!-- Sidebar-social-media start -->
				<div class="banner-left floatleft">
					<!-- Slider-banner start -->
					<div class="slider-banner">
						<div class="single-banner banner-1">
							{% for product in products_new_arrivals %}
							{% if forloop.counter == 1 %}
							<a class="banner-thumb" href="{% url 'shop:singleproduct' product.id %}"><img style="width:450px;height:375px;"  src="{{product.image.url}}" alt="" /></a>
							<span class="pro-label new-label">new</span>
							<span class="price"><span style="font-family: 'Arial', 'Helvetica', sans-serif;">&#8377;</span>{{ product.sale_price }}</span>
							<div class="banner-brief">
								<h2 class="banner-title"><a href="#">{{ product.title }}</a></h2>
								<p class="mb-0">{{ product.category.name }}</p>
							</div>
							<a href="{% url 'shop:singleproduct' product.id %}" class="button-one font-16px" data-text="Buy now">Buy now</a>
							{% endif %}
							{% endfor %}
						</div>
						<div class="single-banner banner-2">
							{% for product in products_new_arrivals %}
							{% if forloop.counter == 2 %}
							<a class="banner-thumb" href="#"><img style="width:450px;height:375px;" src="{{product.image.url}}" alt="" /></a>
							<div class="banner-brief">
								<h2 class="banner-title"><a href="#">New Product 2024</a></h2>
								<p class="hidden-md hidden-sm d-none d-md-block">{{ product.description }}.</p>
								<a href="{% url 'shop:singleproduct' product.id %}" class="button-one font-16px" data-text="Buy now">Buy now</a>
							</div>
							{% endif %}
							{% endfor %}
						</div>
					</div>
					<!-- Slider-banner end -->
				</div>
				<div class="slider-right floatleft">
					<!-- Slider-area start -->
					<div class="slider-area">
						<div class="bend niceties preview-2">
							<div id="ensign-nivoslider" class="slides">
							{% if slider_instance %}
								{% for img in slider_instance %}
									<img src="{{ img.image.url }}" alt="" title="#slider-direction-{{ forloop.counter }}" />
								{% endfor %}
							{% endif %}
							</div>
							<!-- direction 1 -->
							<div id="slider-direction-1" class="t-cn slider-direction">
								<div class="slider-progress"></div>
								<div class="slider-content t-lfl s-tb slider-1">
									<div class="title-container s-tb-c title-compress">
										<div class="layer-1">
											<div class="wow fadeIn" data-wow-duration="1s" data-wow-delay="0.5s">
												<h2 class="slider-title3 text-uppercase mb-0" >welcome to our</h2>
											</div>
											<div class="wow fadeIn" data-wow-duration="1.5s" data-wow-delay="1.5s">
												<h2 class="slider-title1 text-uppercase mb-0">furniture</h2>
											</div>
											<div class="wow fadeIn" data-wow-duration="2s" data-wow-delay="2.5s">
												<h3 class="slider-title2 text-uppercase" >gallery 2021</h3>
											</div>
											<div class="wow fadeIn" data-wow-duration="2.5s" data-wow-delay="3.5s">
												<a href="#" class="button-one style-2 text-uppercase mt-20" data-text="Shop now">Shop now</a>
											</div>
										</div>
									</div>
								</div>
							</div>
							<!-- direction 2 -->
							<div id="slider-direction-2" class="slider-direction">
								<div class="slider-progress"></div>
								<div class="slider-content t-lfl s-tb slider-1">
									<div class="title-container s-tb-c title-compress">
										<div class="layer-1">
											<div class="wow fadeInUpBig" data-wow-duration="1s" data-wow-delay="0.5s">
												<h2 class="slider-title3 text-uppercase mb-0" >welcome to our</h2>
											</div>
											<div class="wow fadeInUpBig" data-wow-duration="1.5s" data-wow-delay="0.5s">
												<h2 class="slider-title1 text-uppercase">furniture</h2>
											</div>
											<div class="wow fadeInUpBig" data-wow-duration="2s" data-wow-delay="0.5s">
												<p class="slider-pro-brief">There are many variations of passages of Lorem Ipsum available, but the majority have suffered alteration in some form, by injected humour, or randomised words which don't look even slightly believable</p>
											</div>
											<div class="wow fadeInUpBig" data-wow-duration="2.5s" data-wow-delay="0.5s">
												<a href="#" class="button-one style-2 text-uppercase mt-20" data-text="Shop now">Shop now</a>
											</div>
										</div>
									</div>
								</div>
							</div>
							<!-- direction 3 -->
							<div id="slider-direction-3" class="slider-direction">
								<div class="slider-progress"></div>
								<div class="slider-content t-lfl s-tb slider-1">
									<div class="title-container s-tb-c title-compress">
										<div class="layer-1">
											<div class="wow fadeInUpBig" data-wow-duration="1s" data-wow-delay="0.5s">
												<h2 class="slider-title3 text-uppercase mb-0" >welcome to our</h2>
											</div>
											<div class="wow fadeInUpBig" data-wow-duration="1.5s" data-wow-delay="0.5s">
												<h2 class="slider-title1 text-uppercase mb-0">furniture</h2>
											</div>
											<div class="wow fadeInUpBig" data-wow-duration="2s" data-wow-delay="0.5s">
												<h3 class="slider-title2 text-uppercase" >gallery 2021</h3>
											</div>
											<div class="wow fadeInUpBig" data-wow-duration="2.5s" data-wow-delay="0.5s">
												<p class="slider-pro-brief">There are many variations of passages of Lorem Ipsum available, but the majority have suffered alteration in some form, by injected humour, or randomised words which don't look even slightly believable</p>
											</div>
											<div class="wow fadeInUpBig" data-wow-duration="3s" data-wow-delay="0.5s">
												<a href="#" class="button-one style-2 text-uppercase mt-20" data-text="Shop now">Shop now</a>
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
					<!-- Slider-area end -->
				</div>
				<!-- Sidebar-social-media start -->
				<div class="sidebar-account d-none d-md-block">
					<div class="table">
						<div class="table-cell">
							<ul>
								<li><a class="search-open" href="#" title="Search"><i class="zmdi zmdi-search"></i></a></li>
								{% if user.id is not None %}
								<li><a href="" title="My-Account"><i class="zmdi zmdi-account"></i></a>
									{% if userprofile.wallet.wallet %}
									{{userprofile.wallet.wallet}}
									{% else %}
									0.00
									{% endif %}
									<div class="customer-login text-left">
										<h4 class="title-1 title-border text-uppercase mb-30">{{ user.username  }}</h4>
										<a class="button-one submit-button mt-15" href={% url 'user:logout'%} data-text="login" type="submit">logout</a>
										<a class="button-one submit-button mt-15" href={% url 'user:account'%} data-text="account" type="submit">My Account</a>
									</div>									
								</li>
								{% else %}
								<li><a href="#" title="Login"><i class="zmdi zmdi-lock"></i></a>
									<div class="customer-login text-left">
										<form action="{% url 'user:login' %}" method='POST'>
											{% csrf_token %}
											<h4 class="title-1 title-border text-uppercase mb-30">Login customers</h4>
											<p class="text-gray">If you have no account with us, Sign Up!</p>
											<input type="text" name="name" placeholder="username here..." />
											<input name="password" type="password" placeholder="Password" />
											<p><a class="text-gray" href="/user/forgotpassword/">Forget your password?</a></p>
											<button class="button-one submit-button mt-15" data-text="login" type="submit">login</button>
											<p><a class="text-gray" href="/user/signup/">Don't have an account? Signup</a></p>
										</form>
									</div>
								</li>
								{% endif %}
								
								<li><a href="/order/wishlist/" title="Wishlist"><i class="zmdi zmdi-favorite"></i></a></li>
							</ul>
						</div>
					</div>
				</div>
				<!-- Sidebar-social-media start -->
			</section>

			<div class="sidebar-search animated slideOutUp">
				<div class="table">
					<div class="table-cell">
						<div class="container">
							<div class="row">
								<div class="col-md-8 offset-md-2 p-0">
									<div class="search-form-wrap">
										<button class="close-search"><i class="zmdi zmdi-close"></i></button>
										<form method="post" action="{% url 'home:get_product' %}">
											{% csrf_token %}
										<div id="autocomplete" class="autocomplete" >
											<input class="autocomplete-input" name="query" type="text" placeholder="Search here..." />
											<ul class="autocomplete-result-list"></ul>
											<button class="search-button" type="submit">
												<i class="zmdi zmdi-search"></i>
											</button>
										</div>
										</form>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>

			<div class="product-area pt-80 pb-35">
				<div class="container">
					<div class="row">
						<div class="col-lg-12">
							<div class="section-title text-center">
								<h2 class="title-border">Featured Products</h2>
							</div>
							<div class="product-slider style-1 arrow-left-right">
								<!-- Single-product start -->
								{% for product in products_best_sellers%}
								<div class="single-product">
									<div class="product-img">
										<span class="pro-label new-label">new</span>
										<a href="{% url 'shop:singleproduct' product.id %}"><img style="width:270px;height:270px;"  src="{{product.image.url}}" alt="" /></a>
										<div class="product-action clearfix">
											<!-- Assuming 'product.size.first' returns the default size for the product -->
											<a href="{% url 'order:addtowishlist' product.id %}?size_id={{ product.size.first.id }}"
											data-bs-toggle="tooltip" data-placement="top" title="Wishlist">
											<i class="zmdi zmdi-favorite-outline"></i>
											</a>
											<a href="{% url 'shop:singleproduct' product.id %}"  data-bs-target="tooltip" title="Quick View"><i class="zmdi zmdi-zoom-in"></i></a>
											<a href="/" data-bs-toggle="tooltip" data-placement="top" title="Compare"><i class="zmdi zmdi-refresh"></i></a>
											<form action="{% url 'order:addtocart' product.id %}?size_id={{ product.size.first.id }}" method="post" class="cart">
												{% csrf_token %}
											<button type="submit"> 
											<a data-bs-toggle="tooltip" data-placement="top" title="Add To Cart"><i class="zmdi zmdi-shopping-cart-plus"></i></a>
										    </button> 
											</form>
										</div>
										
									</div>
									<div class="product-info clearfix">
										<div class="fix">
											<h4 class="post-title floatleft"><a href="#">{{ product.title }}</a></h4>
											<p class="floatright hidden-sm d-none d-md-block">{{ product.category }}</p>
										</div>
										<div class="fix">
											<span class="pro-price floatleft"><span style="font-family: 'Arial', 'Helvetica', sans-serif;">&#8377;</span>{{ product.sale_price }}</span>
											<span class="pro-rating floatright">
												<a href="#"><i class="zmdi zmdi-star"></i></a>
												<a href="#"><i class="zmdi zmdi-star"></i></a>
												<a href="#"><i class="zmdi zmdi-star"></i></a>
												<a href="#"><i class="zmdi zmdi-star-half"></i></a>
												<a href="#"><i class="zmdi zmdi-star-half"></i></a>
											</span>
										</div>
									</div>
								</div>
								{% endfor %}
								<!-- Single-product end -->
 
							</div>
						</div>
					</div>
				</div>
			</div>

			<div class="discount-product-area">
				<div class="container">
					<div class="row">
						<div class="discount-product-slider dots-bottom-right">

							<!-- single-discount-product start -->
							{% for img in banners_images %}
							{% if img.discount_banner.all %}
								{% for disc in img.discount_banner.all %}
							<div class="col-lg-12">
								<div class="discount-product">
									<img src="{{ disc.image.url}}" alt="" />
									<div class="discount-img-brief">
										<div class="onsale">
											<span class="onsale-text">On Sale</span>
											<span class="onsale-price"><span style="font-family: 'Arial', 'Helvetica', sans-serif;">&#8377;</span> 80.00</span>
										</div>
										<div class="discount-info">
											<h1 class="text-dark-red d-none d-md-block">Discount 50%</h1>
											<p class="d-none d-md-block">Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed does eiusmodes tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim venim, quis nostrud exercitation ullamco laboris.</p>
											<a href="/shop/products/" class="button-one font-16px style-3 text-uppercase mt-md-5" data-text="Buy now">Buy now</a>
										</div>
									</div>
								</div>
							</div>
							{% endfor %}
							{% endif %}
						{% endfor %}
							<!-- single-discount-product end -->
						</div>
					</div>
				</div>
			</div>

			<div class="purchase-online-area pt-80">
				<div class="container">
					<div class="row">
						<div class="col-lg-12">
							<div class="section-title text-center">
								<h2 class="title-border">Purchase Online on Hurst</h2>
							</div>
						</div>
					</div>
					<div class="row">
						<div class="col-lg-12 text-center">
							<!-- Nav tabs -->
							<ul class="tab-menu nav clearfix">
								<li><a class="active" href="#new-arrivals" data-bs-toggle="tab">New Arrivals</a></li>
								<li><a href="#best-seller"  data-bs-toggle="tab">Best Seller </a></li>
								<li><a href="#most-view" data-bs-toggle="tab">Most View </a></li>
								<li><a href="#discounts" data-bs-toggle="tab">Discounts</a></li>
							</ul>
						</div>
						<div class="col-lg-12">
							<!-- Tab panes -->
							<div class="tab-content">
								<div class="tab-pane active" id="new-arrivals">
									<div class="row">
										<!-- Single-product start -->
										{% for pro in product %}
										<div class="single-product col-xl-3 col-lg-4 col-md-6">
											<div class="product-img">
												<span class="pro-label new-label">new</span>
												<a href="{% url 'shop:singleproduct' pro.id %}"><img style="width:270px;height:270px;" src="{{ pro.image.url }}" alt="" /></a>
												<div class="product-action clearfix">
													<a href="/order/wishlist/" data-bs-toggle="tooltip" data-placement="top" title="Wishlist"><i class="zmdi zmdi-favorite-outline"></i></a>
													<a href="{% url 'shop:singleproduct' pro.id %}"  data-bs-target="tooltip" title="Quick View"><i class="zmdi zmdi-zoom-in"></i></a>
													<a href="/" data-bs-toggle="tooltip" data-placement="top" title="Compare"><i class="zmdi zmdi-refresh"></i></a>
													<a href="/order/shopcart/" data-bs-toggle="tooltip" data-placement="top" title="Add To Cart"><i class="zmdi zmdi-shopping-cart-plus"></i></a>
												</div>
											</div>
											<div class="product-info clearfix">
												<div class="fix">
													<h4 class="post-title floatleft"><a href="#">{{ pro.title }}</a></h4>
													<p class="floatright hidden-sm">{{ pro.product.category }}</p>
												</div>
												<div class="fix">
													<span class="pro-price floatleft"><span style="font-family: 'Arial', 'Helvetica', sans-serif;">&#8377;</span> {{pro.sale_price}}</span>
													<span class="pro-rating floatright">
														<a href="#"><i class="zmdi zmdi-star"></i></a>
														<a href="#"><i class="zmdi zmdi-star"></i></a>
														<a href="#"><i class="zmdi zmdi-star"></i></a>
														<a href="#"><i class="zmdi zmdi-star-half"></i></a>
														<a href="#"><i class="zmdi zmdi-star-half"></i></a>
													</span>
												</div>
											</div>
										</div>
										{% endfor %}
										<!-- Single-product end -->
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>

			<div class="blog-area pt-55">
				<div class="container">
					<!-- Section-title start -->
					<div class="row">
						<div class="col-lg-12">
							<div class="section-title text-center">
								<h2 class="title-border">From The Blog</h2>
							</div>
						</div>
					</div>
					<!-- Section-title end -->
					<div class="row">
						<!-- Single-blog start -->
						{% for img in banners_images %}
						{% if img.blog_banner.all %}
							{% for disc in img.blog_banner.all %}
						<div class="col-lg-6">
							<div class="single-blog mt-30">
								<div class="row">
									<div class="col-xl-6 col-md-7">
										<div class="blog-info">
											<div class="post-meta fix">
												<div class="post-date floatleft"><span class="text-dark-red">30</span></div>
												<div class="post-year floatleft">
													<p class="text-uppercase text-dark-red mb-0">June, 2021</p>
													<h4 class="post-title"><a href="#" tabindex="0">Farniture drawing 2021</a></h4>
												</div>
											</div>
											<div class="like-share fix">
												<a href="#"><i class="zmdi zmdi-favorite"></i><span>89 Like</span></a>
												<a href="#"><i class="zmdi zmdi-comments"></i><span>59 Comments</span></a>
												<a href="#"><i class="zmdi zmdi-share"></i><span>29 Share</span></a>
											</div>
											<p>There are many variations of passages of Lorem Ipsum available, but the majority have suffered If you are going to use a passage  Lorem Ipsum, you alteration in some form.</p>
											<a href="#" class="button-2 text-dark-red">Read more...</a>
										</div>
									</div>
									<div class="col-xl-6 col-md-5">
										<div class="blog-photo">
											<a href="#"><img style="width:270px;height:230px;" src="{{ disc.image.url }}" alt="" /></a>
										</div>
									</div>
								</div>
							</div>
						</div>
						<!-- Single-blog end -->
						{% endfor %}
						{% endif %}
					{% endfor %}
					</div>
				</div>
			</div>

<div class="subscribe-area pt-80">
    <div class="container">
        <div class="row">
            <div class="col-lg-12">
                <div class="subscribe">
                    <form action="#">
                        <input type="text" placeholder="Enter your email address"/>
                        <button class="submit-button submit-btn-2 button-one" data-text="subscribe" type="submit" >subscribe</button>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
{%endblock%}
{%block footer%}{%include 'footer.html'%}{%endblock%}
{%block javascript%}
<script src="https://unpkg.com/@trevoreyre/autocomplete-js"></script>
<script>
    new Autocomplete('#autocomplete', {
      search: input => {
        const url = `{% url 'home:get_product' %}?search=${input}`;
        return new Promise(resolve => {
          fetch(url)
            .then(response => response.json())
            .then(data => {
              
  
              // Check the structure of the response and resolve with the appropriate property
              if (data.status === true) {
                resolve(data.pro_list);  // Assuming 'pro_list' is the correct property
              } else {
                resolve([]);
              }
            })
            .catch(error => {
              console.error('Error fetching autocomplete data:', error);
              resolve([]);
            });
        });
      },
      getResultValue: result => result.title,  // Adjust according to your data structure
    });
  </script>
{%endblock%}


